<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
      <meta name="robots" content="noai, noimageai">
    

    
      <title>The J Incunabulum · Tony Zorman</title>
    

    <!-- Default appearance -->
    <link rel="stylesheet" type="text/css" href="../css/navbar.css">
    <link rel="stylesheet" type="text/css" href="../css/colours.css">
    <link rel="stylesheet" type="text/css" href="../css/fonts.css">
    <link rel="stylesheet" type="text/css" href="../css/default.css">
    <!-- Syntax highlighting -->
    <link rel="stylesheet" type="text/css" href="../css/pygments.css">
    <link rel="stylesheet" type="text/css" href="../css/katex.css">
    <!-- Margin and sidenotes -->
    
      <link rel="stylesheet" type="text/css" href="../css/tc.css">
    
  </head>

  <body>
    <div class="navbar-space">
      <div id="navigation">
        <a href="../" class="menu-title">
          Tony's blog
        </a>
        <ul>
          <li><a href="../posts.html">Posts</a></li>
          <li><a href="../research.html">Research</a></li>
          <li><a href="../free-software.html">Free Software</a></li>
          <li><a href="../about.html">About</a></li>
        </ul>
      </div>
      <!-- A table of contents on the left side, but only for screens
           that are big enough -->
       
      <div id="contents-big">
        <p class="mini-header">Contents <a id="up-arrow" href="#">↑</a></p>
        <ul>
<li><a href="#the-array-type">The array type</a></li>
<li><a href="#verbs">Verbs</a></li>
<li><a href="#the-repl">The REPL</a>
<ul>
<li><a href="#parsing">Parsing</a></li>
<li><a href="#execution">Execution</a></li>
<li><a href="#pretty-printing">Pretty printing</a></li>
</ul></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
      </div>
       
    </div>
    <div class="text-space">
      <div id="content">
        <article>
    <div class="header">
      11th Jan 2026
      
        &nbsp;&nbsp;·&nbsp;&nbsp;&nbsp;<span title="1902 words">8 min read</span>&nbsp;&nbsp;&nbsp;·&nbsp;&nbsp;
      
      
        <a title="All pages tagged '#c'." href="../tags/c.html" rel="tag">#c</a>   <a title="All pages tagged '#j'." href="../tags/j.html" rel="tag">#j</a>
      
    </div>
    <h1 class="post-title">The J Incunabulum</h1>
    <div id="title-underline"></div>
    <section>
      <!-- A table of contents inline in the text, in case the screen is
           too small for the one in the `default.html' template -->
      <!-- A table of contents inline in the text, in case the screen is too
     small for the one in the `default.html' template -->

  <div id="contents">
    <p class="mini-header">Contents</p>
    <ul>
<li><a href="#the-array-type">The array type</a></li>
<li><a href="#verbs">Verbs</a></li>
<li><a href="#the-repl">The REPL</a>
<ul>
<li><a href="#parsing">Parsing</a></li>
<li><a href="#execution">Execution</a></li>
<li><a href="#pretty-printing">Pretty printing</a></li>
</ul></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
  </div>

<div class="fullwidth">
<p>Ever wanted to find out what
<a href="https://code.jsoftware.com/wiki/Essays/Incunabulum">that one page</a>
of totally cryptic C is all about?</p>
</div>
<!--more-->
<div class="fullwidth">
<p>While I’m waiting for <em>current disastrous weather event</em> to clear up, why not do something fun,
like trying to understand an interpreter for a line-noise language that someone wrote in a different kind of line-noise language almost 40 years ago?</p>
<p>If you’re out of the loop:
the <a href="https://code.jsoftware.com/wiki/Essays/Incunabulum">J Incunabulum</a>
is a one-page interpreter for the <a href="https://www.jsoftware.com/">J</a> programming language,
written in ~1989 by <a href="https://en.wikipedia.org/wiki/Arthur_Whitney_(computer_scientist)">Arthur Whitney</a>,
of <a href="https://en.wikipedia.org/wiki/K_(programming_language)">k</a>
and <a href="https://en.wikipedia.org/wiki/Q_(programming_language_from_Kx_Systems)">q</a> fame.</p>
<p>Note that this post is a bit of an experiment, in various ways.
The most visually striking might be that I’m trying out a semi-experimental two-column layout for displaying code on the right,
and some hopefully enlightening commentary on the left.
This is probably completely broken if you view this post in an RSS viewer, or on a phone,
with the best-case being that you just experience this as a normal, linear, post.
Sorry about that.
If you notice any <span class="small-caps">css</span> irregularities because you’re using a vertical monitor with a 1504×2256 resolution or something,
please <a href="https://tony-zorman.com/about.html" class="local-link">let me know</a>.</p>
</div>
<hr />
<div class="fullwidth">
<p>So, the goal for today is to understand an interpreter for a tiny array-style programming language.
Note that all of the names and explanations I’ll come up with are probably slightly incorrect.
I don’t know how Arthur Whitney thinks, nor am I sure that the names all fit.
Plus, I don’t actually know C, so it may well be true that I messed up some of the casts,
and the original program actually worked slightly differently.
Consult at your own risk.</p>
<p>Further, this is not the minimal number of changes to get this to
compile on a modern machine—for example, I switched to ANSI C function
definitions—, but it helped me better understand what’s going on.
Here’s the minimal set of changes to <a href="https://code.jsoftware.com/wiki/Essays/Incunabulum">the original</a> I’ve found to work:</p>
<details>
<summary>
Diff
</summary>
<div class="highlight-diff" style="padding-left: 1em;"><pre><span></span><span class="gu">@@ -1,11 +1,11 @@</span>
<span class="gd">-typedef char C;typedef long I;</span>
<span class="gi">+typedef char C;typedef long long I;</span>
<span class="w"> </span>typedef struct a{I t,r,d[3],p[2];}*A;
<span class="w"> </span>#define P printf
<span class="w"> </span>#define R return
<span class="w"> </span>#define V1(f) A f(w)A w;
<span class="w"> </span>#define V2(f) A f(a,w)A a,w;
<span class="w"> </span>#define DO(n,x) {I i=0,_n=(n);for(;i&lt;_n;++i){x;}}
<span class="gd">-I *ma(n){R(I*)malloc(n*4);}mv(d,s,n)I *d,*s;{DO(n,d[i]=s[i]);}</span>
<span class="gi">+I *ma(n){R(I*)malloc(n*8);}mv(d,s,n)I *d,*s;{DO(n,d[i]=s[i]);}</span>
<span class="w"> </span>tr(r,d)I *d;{I z=1;DO(r,z=z*d[i]);R z;}
<span class="w"> </span>A ga(t,r,d)I *d;{A z=(A)ma(5+tr(r,d));z-&gt;t=t,z-&gt;r=r,mv(z-&gt;d,d,r);
<span class="w"> </span> R z;}
<span class="gu">@@ -34,8 +34,8 @@</span>
<span class="w"> </span>A ex(e)I *e;{I a=*e;
<span class="w"> </span> if(qp(a)){if(e[1]=='=')R st[a-'a']=ex(e+2);a= st[ a-'a'];}
<span class="w"> </span> R qv(a)?(*vm[a])(ex(e+1)):e[1]?(*vd[e[1]])(a,ex(e+2)):(A)a;}
<span class="gd">-noun(c){A z;if(c&lt;'0'||c&gt;'9')R 0;z=ga(0,0,0);*z-&gt;p=c-'0';R z;}</span>
<span class="gd">-verb(c){I i=0;for(;vt[i];)if(vt[i++]==c)R i;R 0;}</span>
<span class="gi">+I noun(c){A z;if(c&lt;'0'||c&gt;'9')R 0;z=ga(0,0,0);*z-&gt;p=c-'0';R z;}</span>
<span class="gi">+I verb(c){I i=0;for(;vt[i];)if(vt[i++]==c)R i;R 0;}</span>
<span class="w"> </span>I *wd(s)C *s;{I a,n=strlen(s),*e=ma(n+1);C c;
<span class="w"> </span> DO(n,e[i]=(a=noun(c=s[i]))?a:(a=verb(c))?a:c);e[n]=0;R e;}
</pre></div>

</details>
<p>Anyways, let’s crack on.</p>
</div>
<hr />
<h2 id="the-array-type">The array type<a href="#the-array-type" class="floatleft sec-link">§</a></h2>
<div class="tc-row">
<p>We first include some libraries, which were apparently implicit in the original thing.</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>
</pre></div>

</div>
</div>
<div class="tc-row">
<p>The next three definitions are just utility functions:
<code>P</code> and <code>R</code> are to make the code even terser,
and <code>DO</code> is a neat way to compactify loops.
For example, given some <code>int a=0</code>, then <code>DO(n,a+=i)</code> is the same as <code>for(int i=0, i&lt;n, ++i) a+=i;</code>.
Notice how the argument <code>x</code> has access to the loop variable <code>i</code>.</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="cp">#define P printf</span>
<span class="cp">#define R return</span>
<span class="cp">#define DO(n,x) {I _n=(n),i=0;for(;i&lt;_n;++i){x;}}</span>
</pre></div>

</div>
</div>
<div class="tc-row">
<p>Next, some typedefs. <code>C</code> for <code>char</code>, <code>V</code> for <code>void</code> (added by me), and <code>long long</code> for <code>I</code>.
The last definition is particularly important,
as <code>I</code> will serve as an opaque type for some of the program:
it could either hold a character, an actual number (in which case it’s seen as an index into an array of function pointers),
or a pointer to an array (this includes numbers as <a href="https://aplwiki.com/wiki/Rank">rank</a> 0 arrays).
The original program was written on a 32-bit machine, so one had <code>typedef long I;</code>,
but on modern systems we need 64-bit integers for this.</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">C</span><span class="p">;</span><span class="w"> </span><span class="k">typedef</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">V</span><span class="p">;</span><span class="w"> </span><span class="k">typedef</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">I</span><span class="p">;</span>
</pre></div>

</div>
</div>
<div class="tc-row">
<p>Defining functions works with <code>V1</code> for <a href="https://aplwiki.com/wiki/Monadic_function">monadic</a> <a href="https://aplwiki.com/wiki/Function">verbs</a> (functions) and <code>V2</code> for <a href="https://aplwiki.com/wiki/Dyadic_function">dyadic</a> ones.
Functions defined this way take “implicit” arguments <code>a</code> and <code>w</code>
(or just <code>w</code> in the monadic case).
I guess this is based on <span class="small-caps">apl</span>’s α and ω arguments.</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="cp">#define V1(f) A f(A w)</span>
<span class="cp">#define V2(f) A f(A a, A w)</span>
</pre></div>

</div>
</div>
<div class="tc-row">
<p>This is the main attraction—the array struct <code>a</code>,
with pointer type <code>A</code>.
It contains the following fields:</p>
<div class="tc-code">

</div>
</div>
<div class="tc-row">
<ul>
<li><code>t</code>, the type: this is 0 if the array is unboxed, and 1 if it is <a href="https://aplwiki.com/wiki/Box">boxed</a>.</li>
<li><code>r</code>, the <a href="https://aplwiki.com/wiki/Rank">rank</a>: a number from 0 to 2, indicating the rank of the array
(whether it’s a <a href="https://aplwiki.com/wiki/Scalar">scalar</a>, a <a href="https://aplwiki.com/wiki/Vector">vector</a>, or a <a href="https://aplwiki.com/wiki/Matrix">matrix</a>).</li>
<li><code>d</code>, for dimension(?): the <a href="https://aplwiki.com/wiki/Shape">shape</a> vector of the array; i.e., the number of elements in each dimension.</li>
<li><code>p</code>, for pointer(?): a pointer to the rest of the data.
It’s a <a href="https://en.wikipedia.org/wiki/Flexible_array_member">flexible array member</a>,
but I’m honestly not sure why it’s not just declared as <code>p[]</code>.</li>
</ul>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">a</span><span class="p">{</span><span class="n">I</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="n">r</span><span class="p">,</span><span class="n">d</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">];}</span><span class="o">*</span><span class="n">A</span><span class="p">;</span>
</pre></div>

</div>
</div>
<div class="tc-row">
<p>Now we can define small helpers:
<code>ma</code> allocates an integer array of size <code>n</code> and returns it,
<code>mv</code> moves data from one array to another,
and <code>tr</code> returns the number of elements of an array, given its rank and its dimension vector.
I’d imagine <code>tr</code> stands for “total rank” or something similar.</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="n">I</span><span class="o">*</span><span class="nf">ma</span><span class="p">(</span><span class="n">I</span><span class="w"> </span><span class="n">n</span><span class="p">){</span><span class="n">R</span><span class="p">(</span><span class="n">I</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="n">n</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="n">I</span><span class="p">));}</span>
<span class="n">V</span><span class="w"> </span><span class="nf">mv</span><span class="p">(</span><span class="n">I</span><span class="o">*</span><span class="n">d</span><span class="p">,</span><span class="n">I</span><span class="o">*</span><span class="n">s</span><span class="p">,</span><span class="n">I</span><span class="w"> </span><span class="n">n</span><span class="p">){</span><span class="n">DO</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">d</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]);}</span>
<span class="n">I</span><span class="w"> </span><span class="nf">tr</span><span class="p">(</span><span class="n">I</span><span class="w"> </span><span class="n">r</span><span class="p">,</span><span class="n">I</span><span class="o">*</span><span class="n">d</span><span class="p">){</span><span class="n">I</span><span class="w"> </span><span class="n">z</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">DO</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="o">*</span><span class="n">d</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="n">R</span><span class="w"> </span><span class="n">z</span><span class="p">;}</span>
</pre></div>

</div>
</div>
<div class="tc-row">
<p>The next function is one of the main attractions.
I’d imagine <code>ga</code> stands for “general allocator” or something in that vein,
and it does exactly what it says on the tin:
it creates a new array <code>z</code>,
allocates the total number of elements needed (<code>tr(r,d)</code>),
plus five spots for <code>t</code>, <code>r</code>, and <code>d</code> itself,
and then copies everything over.</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="n">A</span><span class="w"> </span><span class="nf">ga</span><span class="p">(</span><span class="n">I</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="n">I</span><span class="w"> </span><span class="n">r</span><span class="p">,</span><span class="n">I</span><span class="o">*</span><span class="n">d</span><span class="p">){</span><span class="n">A</span><span class="w"> </span><span class="n">z</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span><span class="n">z</span><span class="o">=</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="n">ma</span><span class="p">(</span><span class="mi">5</span><span class="o">+</span><span class="n">tr</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">d</span><span class="p">));</span><span class="n">z</span><span class="o">-&gt;</span><span class="n">t</span><span class="o">=</span><span class="n">t</span><span class="p">,</span><span class="n">z</span><span class="o">-&gt;</span><span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">,</span><span class="n">mv</span><span class="p">(</span><span class="n">z</span><span class="o">-&gt;</span><span class="n">d</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">r</span><span class="p">);</span>
<span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">z</span><span class="p">;}</span>
</pre></div>

</div>
</div>
<h2 id="verbs">Verbs<a href="#verbs" class="floatleft sec-link">§</a></h2>
<div class="tc-row">
<p>Now, we get to defining some verbs.
The easiest to understand is surely the not-implemented <code>find</code>!
But <code>id</code> is a close second.</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="n">V2</span><span class="p">(</span><span class="n">find</span><span class="p">){}</span>
<span class="n">V1</span><span class="p">(</span><span class="n">id</span><span class="p">){</span><span class="n">R</span><span class="w"> </span><span class="n">w</span><span class="p">;}</span><span class="w"> </span><span class="cm">/* expands to A id(A w){return w;} */</span>
</pre></div>

</div>
</div>
<div class="tc-row">
<p>The <a href="https://aplwiki.com/wiki/Index_Generator">iota</a> verb <code>~n</code> enumerates the integers from <code>0</code> to <code>n-1</code>,
<code>sha</code> returns the <a href="https://aplwiki.com/wiki/Shape">shape</a> of the array,
and <code>size</code> returns the length of the first dimension.</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="n">V1</span><span class="p">(</span><span class="n">iota</span><span class="p">){</span><span class="n">I</span><span class="w"> </span><span class="n">n</span><span class="o">=*</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">;</span><span class="n">A</span><span class="w"> </span><span class="n">z</span><span class="o">=</span><span class="n">ga</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">&amp;</span><span class="n">n</span><span class="p">);</span><span class="n">DO</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">z</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">i</span><span class="p">);</span><span class="n">R</span><span class="w"> </span><span class="n">z</span><span class="p">;}</span>
<span class="n">V1</span><span class="p">(</span><span class="n">sha</span><span class="p">){</span><span class="n">A</span><span class="w"> </span><span class="n">z</span><span class="o">=</span><span class="n">ga</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">&amp;</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">r</span><span class="p">);</span><span class="n">mv</span><span class="p">(</span><span class="n">z</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">,</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">d</span><span class="p">,</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">r</span><span class="p">);</span><span class="n">R</span><span class="w"> </span><span class="n">z</span><span class="p">;}</span>
<span class="n">V1</span><span class="p">(</span><span class="n">size</span><span class="p">){</span><span class="n">A</span><span class="w"> </span><span class="n">z</span><span class="o">=</span><span class="n">ga</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="o">*</span><span class="n">z</span><span class="o">-&gt;</span><span class="n">p</span><span class="o">=</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">r</span><span class="o">?*</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">d</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span><span class="n">R</span><span class="w"> </span><span class="n">z</span><span class="p">;}</span>
</pre></div>

</div>
</div>
<div class="tc-row">
<p>Addition is implemented as one would expect:
allocate a result array with the same shape as the input,
and add corresponding elements.</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="n">V2</span><span class="p">(</span><span class="n">plus</span><span class="p">){</span><span class="n">I</span><span class="w"> </span><span class="n">r</span><span class="o">=</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">r</span><span class="p">,</span><span class="o">*</span><span class="n">d</span><span class="o">=</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">d</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="n">tr</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">d</span><span class="p">);</span>
<span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">z</span><span class="o">=</span><span class="n">ga</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">r</span><span class="p">,</span><span class="n">d</span><span class="p">);</span><span class="n">DO</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">z</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="n">R</span><span class="w"> </span><span class="n">z</span><span class="p">;}</span>
</pre></div>

</div>
</div>
<div class="tc-row">
<p><a href="https://aplwiki.com/wiki/Catenate">Cat</a> joins two arrays into a single vector,
and <a href="https://aplwiki.com/wiki/Enclose">box</a> wraps an array in a scalar box.
This is, I think, the first instance of abusing <code>I</code> as an opaque type:
notice the cast <code>*z-&gt;p=(I)w</code> to turn the entire given array into the first element of <code>z-&gt;p</code>.</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="n">V1</span><span class="p">(</span><span class="n">box</span><span class="p">){</span><span class="n">A</span><span class="w"> </span><span class="n">z</span><span class="o">=</span><span class="n">ga</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="o">*</span><span class="n">z</span><span class="o">-&gt;</span><span class="n">p</span><span class="o">=</span><span class="p">(</span><span class="n">I</span><span class="p">)</span><span class="n">w</span><span class="p">;</span><span class="n">R</span><span class="w"> </span><span class="n">z</span><span class="p">;}</span>
<span class="n">V2</span><span class="p">(</span><span class="n">cat</span><span class="p">){</span><span class="n">I</span><span class="w"> </span><span class="n">an</span><span class="o">=</span><span class="n">tr</span><span class="p">(</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">r</span><span class="p">,</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">d</span><span class="p">),</span><span class="n">wn</span><span class="o">=</span><span class="n">tr</span><span class="p">(</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">r</span><span class="p">,</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">d</span><span class="p">),</span><span class="n">n</span><span class="o">=</span><span class="n">an</span><span class="o">+</span><span class="n">wn</span><span class="p">;</span>
<span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">z</span><span class="o">=</span><span class="n">ga</span><span class="p">(</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">t</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">&amp;</span><span class="n">n</span><span class="p">);</span><span class="n">mv</span><span class="p">(</span><span class="n">z</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">,</span><span class="n">an</span><span class="p">);</span><span class="n">mv</span><span class="p">(</span><span class="n">z</span><span class="o">-&gt;</span><span class="n">p</span><span class="o">+</span><span class="n">an</span><span class="p">,</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">,</span><span class="n">wn</span><span class="p">);</span><span class="n">R</span><span class="w"> </span><span class="n">z</span><span class="p">;}</span>
</pre></div>

</div>
</div>
<div class="tc-row">
<p><a href="https://aplwiki.com/wiki/From">From</a> implements selection.
Given an index <code>a</code> (or an array, in which case only the first value is used) and an array <code>w</code>,
it returns the sub-array at that index.</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="n">V2</span><span class="p">(</span><span class="n">from</span><span class="p">){</span><span class="n">I</span><span class="w"> </span><span class="n">r</span><span class="o">=</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">r</span><span class="mi">-1</span><span class="p">,</span><span class="o">*</span><span class="n">d</span><span class="o">=</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">d</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="n">tr</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">d</span><span class="p">);</span>
<span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">z</span><span class="o">=</span><span class="n">ga</span><span class="p">(</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">t</span><span class="p">,</span><span class="n">r</span><span class="p">,</span><span class="n">d</span><span class="p">);</span><span class="n">mv</span><span class="p">(</span><span class="n">z</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">,</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">p</span><span class="o">+</span><span class="p">(</span><span class="n">n</span><span class="o">**</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">),</span><span class="n">n</span><span class="p">);</span><span class="n">R</span><span class="w"> </span><span class="n">z</span><span class="p">;}</span>
</pre></div>

</div>
</div>
<div class="tc-row">
<p><a href="https://aplwiki.com/wiki/Reshape">Reshape</a> changes the shape of an array.
The left argument specifies the new shape.
The incredibly cursed last line copies elements cyclically if needed.
We first fill all of <code>w</code> into <code>z</code>,
and then walk two pointers, one ahead of the other by <code>wn</code>, forward <code>n-wn</code> steps,
filling up elements as we go, so later iterations can already access the ones resulting from earlier memmoves.</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="n">V2</span><span class="p">(</span><span class="n">rsh</span><span class="p">){</span><span class="n">I</span><span class="w"> </span><span class="n">r</span><span class="o">=</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">r</span><span class="o">?*</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">d</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="n">tr</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">),</span><span class="n">wn</span><span class="o">=</span><span class="n">tr</span><span class="p">(</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">r</span><span class="p">,</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">d</span><span class="p">);</span>
<span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">z</span><span class="o">=</span><span class="n">ga</span><span class="p">(</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">t</span><span class="p">,</span><span class="n">r</span><span class="p">,</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">);</span><span class="n">mv</span><span class="p">(</span><span class="n">z</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">,</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">,</span><span class="n">wn</span><span class="o">=</span><span class="n">n</span><span class="o">&gt;</span><span class="n">wn</span><span class="o">?</span><span class="n">wn</span><span class="o">:</span><span class="n">n</span><span class="p">);</span>
<span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">n</span><span class="o">-=</span><span class="n">wn</span><span class="p">)</span><span class="n">mv</span><span class="p">(</span><span class="n">z</span><span class="o">-&gt;</span><span class="n">p</span><span class="o">+</span><span class="n">wn</span><span class="p">,</span><span class="n">z</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">,</span><span class="n">n</span><span class="p">);</span><span class="n">R</span><span class="w"> </span><span class="n">z</span><span class="p">;}</span>
</pre></div>

</div>
</div>
<hr />
<h2 id="the-repl">The <span class="small-caps">repl</span><a href="#the-repl" class="floatleft sec-link">§</a></h2>
<div class="tc-row">
<p>The main part of the program is a small <span class="small-caps">repl</span>:</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(){</span><span class="n">C</span><span class="w"> </span><span class="n">s</span><span class="p">[</span><span class="mi">99</span><span class="p">];</span><span class="k">while</span><span class="p">(</span><span class="n">fgets</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="n">stdin</span><span class="p">)){</span><span class="n">pr</span><span class="p">(</span><span class="n">ex</span><span class="p">(</span><span class="n">wd</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">strlen</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="mi">-1</span><span class="p">)));}}</span>
</pre></div>

</div>
</div>
<div class="tc-row">
<p>It reads a line, calls <code>wd</code> (word) to parse it,
then executes it with <code>ex</code>,
and finally pretty-prints it with <code>pr</code>.</p>
<div class="tc-code">

</div>
</div>
<h3 id="parsing">Parsing<a href="#parsing" class="floatleft sec-link">§</a></h3>
<div class="tc-row">
<p>Let’s first define the verb table <code>vt</code>,
giving names to the functions defined above.
There are arrays of function pointers for monadic (<code>vm</code>) and dyadic (<code>vd</code>) verbs;
for example, <code>6#1,2</code> is reshape, <code>&lt;a</code> is box, and so on.</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="n">C</span><span class="w"> </span><span class="n">vt</span><span class="p">[]</span><span class="o">=</span><span class="s">&quot;+{~&lt;#,&quot;</span><span class="p">;</span><span class="w"> </span><span class="cm">/* +    {    ~    &lt;   #   ,    */</span>
<span class="n">A</span><span class="p">(</span><span class="o">*</span><span class="n">vd</span><span class="p">[])(</span><span class="n">A</span><span class="p">,</span><span class="n">A</span><span class="p">)</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="n">plus</span><span class="p">,</span><span class="n">from</span><span class="p">,</span><span class="n">find</span><span class="p">,</span><span class="mi">0</span><span class="w">  </span><span class="p">,</span><span class="n">rsh</span><span class="p">,</span><span class="n">cat</span><span class="p">},</span>
<span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">vm</span><span class="p">[])(</span><span class="n">A</span><span class="p">)</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="n">id</span><span class="w">  </span><span class="p">,</span><span class="n">size</span><span class="p">,</span><span class="n">iota</span><span class="p">,</span><span class="n">box</span><span class="p">,</span><span class="n">sha</span><span class="p">,</span><span class="mi">0</span><span class="w">  </span><span class="p">};</span>
</pre></div>

</div>
</div>
<div class="tc-row">
<p>For parsing we need two small utility functions that check whether the given character is a <a href="https://aplwiki.com/wiki/Array_(syntax)">noun</a> or a <a href="https://aplwiki.com/wiki/Function">verb</a>.
Here, a noun is merely a number between 0 and 9,
which is then immediately transformed into a rank 0 array, cast to an integer, and returned.
In case of a verb, return the index of it in the <code>vt</code> array incremented by one.
Both functions return a plain 0 if nothing matches—note that this is different from inputting a 0, which would be transformed into an array.</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="n">I</span><span class="w"> </span><span class="nf">noun</span><span class="p">(</span><span class="n">C</span><span class="w"> </span><span class="n">c</span><span class="p">){</span><span class="n">A</span><span class="w"> </span><span class="n">z</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="n">c</span><span class="o">&lt;</span><span class="sc">'0'</span><span class="o">||</span><span class="n">c</span><span class="o">&gt;</span><span class="sc">'9'</span><span class="p">)</span><span class="n">R</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="n">z</span><span class="o">=</span><span class="n">ga</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="o">*</span><span class="n">z</span><span class="o">-&gt;</span><span class="n">p</span><span class="o">=</span><span class="n">c</span><span class="o">-</span><span class="sc">'0'</span><span class="p">;</span><span class="n">R</span><span class="p">(</span><span class="n">I</span><span class="p">)</span><span class="n">z</span><span class="p">;}</span>
<span class="n">I</span><span class="w"> </span><span class="nf">verb</span><span class="p">(</span><span class="n">C</span><span class="w"> </span><span class="n">c</span><span class="p">){</span><span class="n">I</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">for</span><span class="p">(;</span><span class="n">vt</span><span class="p">[</span><span class="n">i</span><span class="p">];)</span><span class="k">if</span><span class="p">(</span><span class="n">vt</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">]</span><span class="o">==</span><span class="n">c</span><span class="p">)</span><span class="n">R</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="n">R</span><span class="w"> </span><span class="mi">0</span><span class="p">;}</span>
</pre></div>

</div>
</div>
<div class="tc-row">
<p>Parsing is done character by character,
exactly as one would expect: allocate an integer array <code>e</code>,
check if each character is a noun or a verb,
and store the result back into <code>e</code>.
If it is neither, just store the character’s value.</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="n">I</span><span class="o">*</span><span class="nf">wd</span><span class="p">(</span><span class="n">C</span><span class="o">*</span><span class="n">s</span><span class="p">,</span><span class="n">I</span><span class="w"> </span><span class="n">n</span><span class="p">){</span><span class="n">I</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="o">*</span><span class="n">e</span><span class="o">=</span><span class="n">ma</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span><span class="n">C</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
<span class="w">  </span><span class="n">DO</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">e</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">noun</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span><span class="o">?</span><span class="n">a</span><span class="o">:</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">verb</span><span class="p">(</span><span class="n">c</span><span class="p">))</span><span class="o">?</span><span class="n">a</span><span class="o">:</span><span class="n">c</span><span class="p">);</span><span class="n">e</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">R</span><span class="w"> </span><span class="n">e</span><span class="p">;}</span>
</pre></div>

</div>
</div>
<h3 id="execution">Execution<a href="#execution" class="floatleft sec-link">§</a></h3>
<div class="tc-row">
<p>Onto execution.
There’s enough memory for 26 variables, which are stored in the <code>st</code> array.
Execution—like parsing—is done character by character.
There are two queries that will be important here:
with <code>qp</code> one can ask whether the character is a letter,
and <code>qv</code> checks if it’s a verb (all of the symbols <code>+{~&lt;#,</code> have an ASCII value less than <code>a</code>).</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="n">A</span><span class="w"> </span><span class="n">st</span><span class="p">[</span><span class="mi">26</span><span class="p">];</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="nf">qp</span><span class="p">(</span><span class="n">I</span><span class="w"> </span><span class="n">a</span><span class="p">){</span><span class="n">R</span><span class="w"> </span><span class="n">a</span><span class="o">&gt;=</span><span class="sc">'a'</span><span class="o">&amp;&amp;</span><span class="n">a</span><span class="o">&lt;=</span><span class="sc">'z'</span><span class="p">;}</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="nf">qv</span><span class="p">(</span><span class="n">I</span><span class="w"> </span><span class="n">a</span><span class="p">){</span><span class="n">R</span><span class="w"> </span><span class="n">a</span><span class="o">&lt;</span><span class="sc">'a'</span><span class="p">;}</span>
</pre></div>

</div>
</div>
<div class="tc-row">
<p>Execution itself is done right-to-left,
using a recursive descent approach.
If the currently scrutinised character is a letter,
and is followed by an equals sign, then we execute whatever is to the right of that equals sign,
store the information in <code>st</code>, and return.
Otherwise, whatever value happens to be in <code>st</code> for that letter is cast to an integer and stored in <code>a</code>.
After that <code>a</code> either points to a character in the input,
is an actual integer (in which case it’s an index into the <code>vm</code> or <code>vd</code> arrays),
or is a pointer to an array.
Next, we check if <code>a</code> is a verb;
if it is, then it must be a monadic one,
so we call the corresponding function pointer with the result of first evaluating its argument.
If <code>a</code> is not a verb, we check if there is anything to its right.
If yes, this thing to its right must be a dyadic function,
so we call that dyadic function with its left argument <code>a</code>—which is already evaluated, and we now know must be an array—, and with the array its right argument evaluates to.
If none of those conditions match, <code>a</code> must be a lone array that is already fully evaluated, so return that.</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="n">A</span><span class="w"> </span><span class="nf">ex</span><span class="p">(</span><span class="n">I</span><span class="o">*</span><span class="n">e</span><span class="p">){</span><span class="n">I</span><span class="w"> </span><span class="n">a</span><span class="o">=*</span><span class="n">e</span><span class="p">;</span>
<span class="w">  </span><span class="k">if</span><span class="p">(</span><span class="n">qp</span><span class="p">(</span><span class="n">a</span><span class="p">)){</span><span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="sc">'='</span><span class="p">)</span><span class="n">R</span><span class="w"> </span><span class="n">st</span><span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="sc">'a'</span><span class="p">]</span><span class="o">=</span><span class="n">ex</span><span class="p">(</span><span class="n">e</span><span class="o">+</span><span class="mi">2</span><span class="p">);</span><span class="w"> </span><span class="n">a</span><span class="o">=</span><span class="p">(</span><span class="n">I</span><span class="p">)</span><span class="n">st</span><span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="sc">'a'</span><span class="p">];}</span>
<span class="w">  </span><span class="n">R</span><span class="w"> </span><span class="n">qv</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">?</span><span class="p">(</span><span class="o">*</span><span class="n">vm</span><span class="p">[</span><span class="n">a</span><span class="p">])(</span><span class="n">ex</span><span class="p">(</span><span class="n">e</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span><span class="o">:</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">?</span><span class="p">(</span><span class="o">*</span><span class="n">vd</span><span class="p">[</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">]])((</span><span class="n">A</span><span class="p">)</span><span class="n">a</span><span class="p">,</span><span class="n">ex</span><span class="p">(</span><span class="n">e</span><span class="o">+</span><span class="mi">2</span><span class="p">))</span><span class="o">:</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="n">a</span><span class="p">;}</span>
</pre></div>

</div>
</div>
<h3 id="pretty-printing">Pretty printing<a href="#pretty-printing" class="floatleft sec-link">§</a></h3>
<div class="tc-row">
<p><code>pi</code> prints an integer, and <code>nl</code> prints a newline.</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="n">V</span><span class="w"> </span><span class="nf">pi</span><span class="p">(</span><span class="n">I</span><span class="w"> </span><span class="n">i</span><span class="p">){</span><span class="n">P</span><span class="p">(</span><span class="s">&quot;%lld &quot;</span><span class="p">,</span><span class="n">i</span><span class="p">);}</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="nf">nl</span><span class="p">(){</span><span class="n">P</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);}</span>
</pre></div>

</div>
</div>
<div class="tc-row">
<p>The main pretty-printing function is <code>pr</code>.
The first line prints the shape vector of the given array.
The second line checks whether the array is boxed;
if it’s not, then it just prints the array as a flat list—hence the shape information in the first line, I suppose.
If it is a boxed array, we indicate that with <code>&lt;</code>, and recurse.
Here we dangerously reinterpret the integer that’s stored in each <code>w-&gt;p[i]</code> as a pointer to an array.</p>
<div class="tc-code">
<div class="highlight-c" style="padding-left: 1em;"><pre><span></span><span class="n">V</span><span class="w"> </span><span class="nf">pr</span><span class="p">(</span><span class="n">A</span><span class="w"> </span><span class="n">w</span><span class="p">){</span><span class="n">I</span><span class="w"> </span><span class="n">r</span><span class="o">=</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">r</span><span class="p">,</span><span class="o">*</span><span class="n">d</span><span class="o">=</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">d</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="n">tr</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">d</span><span class="p">);</span><span class="n">DO</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">pi</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="n">i</span><span class="p">]));</span><span class="n">nl</span><span class="p">();</span>
<span class="w">  </span><span class="k">if</span><span class="p">(</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">t</span><span class="p">)</span><span class="n">DO</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">P</span><span class="p">(</span><span class="s">&quot;&lt; &quot;</span><span class="p">);</span><span class="n">pr</span><span class="p">((</span><span class="n">A</span><span class="p">)</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span><span class="k">else</span><span class="w"> </span><span class="n">DO</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">pi</span><span class="p">(</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]));</span><span class="n">nl</span><span class="p">();}</span>
</pre></div>

</div>
</div>
<h2 id="conclusion">Conclusion<a href="#conclusion" class="floatleft sec-link">§</a></h2>
<div class="tc-row">
<p>Obviously, this code is <em>super</em> brittle, and the code basically segfaults if you look at it wrong.
When holding it just right, however, it does sort of work,
and then it feels a bit magical—here are the core ideas of an array programming language in barely 40 lines of C.
Plus, it made me feel a bit like a computer science archaeologist.
An afternoon well spent, I’d say!</p>
<div class="tc-code">
<div class="highlight-text" style="padding-left: 1em;"><pre><span></span>    1,2,8,7
4
1 2 8 7
    a=~7
7
0 1 2 3 4 5 6
    a+a
7
0 2 4 6 8 10 12
    b=2,3
2
2 3
    c=b#a
2 3
0 1 2 3 4 5
    a=&lt;1,2,3,4

&lt; 4
1 2 3 4

    b=a,1
2
94660986832144 1
</pre></div>

</div>
</div>

      <!-- Body is included in the above file -->
    </section>
    
      <!-- A footer-ish thing above the actual boring footer for pretty
           fleurons and things that should only appear on posts. -->
      <div style="text-align: center;">
        <img class="fleuron-block" src="../images/fleuron.svg" alt="End of post fleuron">
        Have a comment? Write me an <a href="../about.html">email!</a>
      </div>
    
</article>

      </div>
      <div id="footer">
        <!-- Left -->
        <a id="to-top" href="#">top</a>
        <!-- Right -->
        <a href="../atom.xml" style="font-variant:small-caps">rss</a>
        &nbsp;|&nbsp;
        <a href="https://github.com/slotThe/slotThe.github.io">Website source</a>
        &nbsp;|&nbsp;
        <a href="../impressum.html">Legal notice and privacy policy</a>
        <!-- Newline -->
        <p style="margin-top:0;">Everything on this website—<a style="color:var(--fg-footer-pipe)" href="https://en.wikipedia.org/wiki/Dash#Em_dash">em dash</a> and all—was created by a human</p>
      </div>
    </div>
  </body>
</html>
